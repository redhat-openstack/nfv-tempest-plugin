{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7695453c_5cbfcbc9",
        "filename": "nfv_tempest_plugin/tests/scenario/baremetal_manager.py",
        "patchSetId": 12
      },
      "lineNbr": 831,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2021-02-16T19:03:43Z",
      "side": 1,
      "message": "Ella,\n\nYou are making changes without considering existing tests.\n\nYou have added additional \u0027if\u0027 condition in the port creation method which is ok.\nAnd here you changed creation of \u0027security_groups\u0027 kwargs from self.remote_ssh_sec_groups_names to remove of the id from the kwargs[\u0027security_groups\u0027]\n\nNow, what will happen in the following scenarios:\n1) With your test, everything will work as expected.\n2) All other test will fail because by default, tests do not passing \u0027security_groups\u0027 in the kwargs to the \"self.create_and_verify_resources\" method, but using the default.\nAs a result, when the creation of the resources will get here, it will not have created default security groups and fail on removable id from the kwargs task as kwargs[\u0027security_groups\u0027] will not exist.\n\nDid you run any other test?",
      "range": {
        "startLine": 831,
        "startChar": 8,
        "endLine": 831,
        "endChar": 43
      },
      "revId": "7aaac7eca2af1c2f92e19e1214ddf41e6184eaa7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "098fae8b_e06c252c",
        "filename": "nfv_tempest_plugin/tests/scenario/baremetal_manager.py",
        "patchSetId": 12
      },
      "lineNbr": 831,
      "author": {
        "id": 1018675
      },
      "writtenOn": "2021-02-16T20:40:39Z",
      "side": 1,
      "message": "unfortunately most of the tests are still failing on my setup regardless. usually only the tests that dont requires vms pass on my setup so I missed that :(\n\nI\u0027ll try to get my setup working after that...",
      "parentUuid": "7695453c_5cbfcbc9",
      "range": {
        "startLine": 831,
        "startChar": 8,
        "endLine": 831,
        "endChar": 43
      },
      "revId": "7aaac7eca2af1c2f92e19e1214ddf41e6184eaa7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b8e2d829_4d598d6e",
        "filename": "nfv_tempest_plugin/tests/scenario/baremetal_manager.py",
        "patchSetId": 12
      },
      "lineNbr": 831,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2021-02-16T21:11:42Z",
      "side": 1,
      "message": "Ok, so with adding the \"if\" condition for the \u0027security_groups\u0027 in kwargs, the tests will not fail.\nWe are attaching security groups to a ports, so connectivity will be available.\nBut the problem is that all instances that will be spawned up, will not have security group attached.\nThat is because as I mentioned in the previous comment, by default, the instance will not contain \u0027security_groups\u0027 within the kwargs.\nUnfortunately, that is not good.\n\n\nElla,\nLet\u0027s look at the task from the different angle.\nYou would like to be able to add custom security group rules to the instance.\nI would like to keep the security group with ssh/icmp attached to the instance.\nSo it could be solved it in a different way.\n\nHere - [1], we are creating security group for the instances.\nAll these - [2], are the methods that responsible to create security group, create security group rules and attach those rules to the security group.\nAt the end, class security group variable are filled with sec group info and used later by the instances.\n\nI suggest to update the security group methods in a way that by default, they will do exactly what they do today.\nBut if a \u0027security_groups_rules\u0027 will be passed in the kwargs, those rules will be added to the existing ssh/icmp rules.\n\nAs a result, we will get the same security group to the instances.\nBut this security group will be able to extend the amount of the rules that needed for the test.\n\n\n[1] - https://github.com/redhat-openstack/nfv-tempest-plugin/blob/master/nfv_tempest_plugin/tests/scenario/baremetal_manager.py#L819\n[2] - https://github.com/redhat-openstack/nfv-tempest-plugin/blob/8c2b1466b03b99127af725775164295ee5726b71/nfv_tempest_plugin/tests/scenario/baremetal_manager.py#L849-L924",
      "parentUuid": "098fae8b_e06c252c",
      "range": {
        "startLine": 831,
        "startChar": 8,
        "endLine": 831,
        "endChar": 43
      },
      "revId": "7aaac7eca2af1c2f92e19e1214ddf41e6184eaa7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89d1fbaa_e89daab3",
        "filename": "nfv_tempest_plugin/tests/scenario/baremetal_manager.py",
        "patchSetId": 12
      },
      "lineNbr": 832,
      "author": {
        "id": 1016438
      },
      "writtenOn": "2021-02-16T16:28:45Z",
      "side": 1,
      "message": "Is it needed due to:\nnfv_tempest_plugin/tests/scenario/test_nfv_dpdk_usecases.py#215?",
      "range": {
        "startLine": 832,
        "startChar": 0,
        "endLine": 832,
        "endChar": 5
      },
      "revId": "7aaac7eca2af1c2f92e19e1214ddf41e6184eaa7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0625c29_7f2e863f",
        "filename": "nfv_tempest_plugin/tests/scenario/baremetal_manager.py",
        "patchSetId": 12
      },
      "lineNbr": 832,
      "author": {
        "id": 1018675
      },
      "writtenOn": "2021-02-16T20:29:09Z",
      "side": 1,
      "message": "it is needed in general to add the functionallity of using kwargs[\u0027security_group\u0027] because the port creation needs both id and name but the server creation fails if the dict contains an id",
      "parentUuid": "89d1fbaa_e89daab3",
      "range": {
        "startLine": 832,
        "startChar": 0,
        "endLine": 832,
        "endChar": 5
      },
      "revId": "7aaac7eca2af1c2f92e19e1214ddf41e6184eaa7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6751318b_487edfeb",
        "filename": "nfv_tempest_plugin/tests/scenario/qos_manager.py",
        "patchSetId": 12
      },
      "lineNbr": 338,
      "author": {
        "id": 1016438
      },
      "writtenOn": "2021-02-16T16:28:45Z",
      "side": 1,
      "message": "I haven\u0027t worked on the original code but I seem to remember that there was a reason why 0.08 was picked, maybe it is only related to min QoS scenario.\n\nWere you able to try this patch also on min QoS tests?",
      "revId": "7aaac7eca2af1c2f92e19e1214ddf41e6184eaa7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c575bbb_49a75d4f",
        "filename": "nfv_tempest_plugin/tests/scenario/qos_manager.py",
        "patchSetId": 12
      },
      "lineNbr": 338,
      "author": {
        "id": 1008672
      },
      "writtenOn": "2021-02-16T19:03:43Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "6751318b_487edfeb",
      "revId": "7aaac7eca2af1c2f92e19e1214ddf41e6184eaa7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c2ddb04_b4798f16",
        "filename": "nfv_tempest_plugin/tests/scenario/qos_manager.py",
        "patchSetId": 12
      },
      "lineNbr": 338,
      "author": {
        "id": 1018675
      },
      "writtenOn": "2021-02-16T20:29:09Z",
      "side": 1,
      "message": "I asked yariv this was a buffer for the avrage to not exceed more then 8% over the limit but the way it was calculated made it that some of the times the avarage is acctually lower then the limit but it would still indicates it exceeds the limit so I left the 8% buffer but first made sure the avg is lower then the max_qos",
      "parentUuid": "1c575bbb_49a75d4f",
      "revId": "7aaac7eca2af1c2f92e19e1214ddf41e6184eaa7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}